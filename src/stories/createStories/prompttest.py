import os
import openai

# Set openai.api_key to the OPENAI environment variable
openai.api_key = ''

narrative_arc_template = 'This story will be used as a script for a YouTube video about: otf durks house getting broke into. The main event is: otf durks house getting broke into. Heres more context {Lil Durk got a rude awakening, when some people busted into his home and exchanged gunfire with him and his girlfriend ... this according to law enforcement. According to the Georgia Bureau of Investigation ... the rapper and his girlfriend, India Cox, were the victims of a home invasion and aggravated assault this past Sunday a little after 5 AM. Law enforcement tells us several unidentified individuals entered Durks home in the Chateau Elan neighborhood of Braselton -- about an hour outside Atlanta -- and a shootout ensued.}. The sequence of events are: king vons little sister, kayla b, car gets broken into and he chain is stolen,kayla b goes to durk for help getting her chain back  ,otf durk goes to lil baby to find out who did it and mediate the situation because lil baby has pull in atlanta and a history of mediating situations, lil baby finds out it was glizzy gang and goes to the to ask for the chain back,glizzy gang refused to return the chain unless they get paid,glizzy gangs response causes a fallout between lil baby and glizzy gang,since glizzy gang would give  up the chain, otf durk put a green light on them,otf boona runs into glizzy gang members at cumberland mall, gets into a verbal altercation and a shootout with glizzy gang but drops his cell phone,4 months later, otf durks house gets broken into and the shootout with india happens,otf durk puts bounty on glizzy gang members,glizzy gang mark gets killed,,,,,,,,. The narrative I am aiming for is: theres a lot of street beef that goes on behind the scenes in the rap game and otf durk is a serious gangster thats not to be played with. The important characters to focus on are: otf durk. The important characters to focus on are: lil baby. The important characters to focus on are: otf boona. The important characters to focus on are: glizzy gang. The key relationships between the characters are: otf durks relationship with lil baby and lil babys ties to atlanta street gangs. A normal day in the life for [main character] looks like: for otf durk... in the studio, on the private jet flying to do performances with the otf crew and hanging out with family. A normal day in the life for [main character] looks like: for lil baby... in the studio, on the private jet flying to do performances with the 4pf crew and mediating street politics. A normal day in the life for [main character] looks like: for otf boona, protecting otf durk and the otf reputation as one of the gangs most loyal and top enforcers. What event disrupts the normal life of the main character(s) and why is this event significant: when kayla bs car was broken into. This event is signifigant because kayla b isnt just anybody, Shes the blood sister King Von, a beloved and well respected deceased member of otf and second in command to otf durk. . What are the challenges, conflicts, or obstacles that the characters face as a result of the inciting incident: Otf durk is forever loyal to king von and because of this, he has to step into the situation to help get kayla bs chain back. Lil baby has to mediate a return of the chain from a group of young wild street gang members. Glizzy gang now has beef with 2 of the richest gangs in atlanta, OTF with otf durk and 4pf with lil baby. . How do these challenges escalate over time: After glizzy gang refuses to give the chain back unless theyre paid, otf durk has to  protect otfs reputation by any means. Lil baby now has beef with glizzy gang with whom he was once on good terms with since glizzy gang allegedly shoot up some spots in 4pf territory. Glizzy gang now has Otf member actively out looking for them to settle the score from the chain theft and 4pf member looking for get back from shooting in their neighboorhood. What choices do the characters make to deal with these challenges: Otf durk green lights glizzy gang members mean any otf member that see any glizzy gang members out, shoot on sight. Lil baby also has 4pf member out hunting for glizzy gang members. How do the characters react to this event:  Otf boona now has the green light to shoot on sight to protect the otf reputation in atlanta and has to find glizzy gang members for retaliation from not giving the chain back. Otf boona sees glizzy gang members at the mall, gets into a verbal altercation and has a shootout hitting 4 glizzy gang members and a 6 year old child. Otf boona eventually get caught because he dropped his cell phone at the crime scene and is sentenced to 8 years. Here more contect {OTF Boona, an affiliate of Chicago rap star Lil Durk, has reportedly been arrested for his alleged role in an Atlanta mall shooting that struck a 6-year-old boy.Boona (real name Michael L. Golden) was detained on four felony charges of aggravated assault with intent to murder and is currently being held without bond in Cobb County, Georgia.According to Patch, Boona is accused of jumping out of an SUV and firing at another car — before fleeing the scene — in the parking lot of Cumberland Mall in Atlanta in March. An earlier report from WSB-TV suggested suspects in the other vehicle fired back.The shooting left four people injured, including a young boy who was caught by a stray bullet. Police found the boy bleeding on a curb when they arrived to the scene. All four victims survived their injuries.Three other men have been arrested in connection with the shooting: Karanji Reese, 18; Jokava Harris, 19; and Desan Powell, 19. All three face gun and drug charges.OTF Boona was eventually tracked down and arrested after dropping his phone at the scene of the crime. His arrest warrant reveals police executed a search warrant on the phone and used his social media activity to tie him to the shooting. Durk from a fan who got a little too close for comfort during a festival performance. Boona also appeared on Lil Durk‘s OTF compilation album Loyal Bros, which dropped in March — just weeks before the Atlanta mall shooting. CUMBERLAND — Cobb police are investigating a shooting at Cumberland Mall that left four people injured Tuesday evening, one of them a child.Sgt. Wayne Delk, spokesman for the Cobb County Police Department, identified the victims Wednesday. They are: Karanji Reese, 19; Jokava Harris, 19; Desean Powell, 19; and one elementary school-age child. The victims sustained wounds to the leg, foot and back.The shooting took place in front of the mall’s restaurants shortly after 6 p.m., according to Delk. Police did not evacuate the mall when they arrived, as the threat had already passed, Delk said, and the injured were in stable condition when they were transported from the scene of the shooting.On Wednesday afternoon, the mall, including the Buffalo Wild Wings, was open and reasonably busy. Several shoppers hadn’t heard about the shooting, but most said they weren’t surprised by it.The mall was shut down for several hours on a Saturday in December 2019 when a shooting injured a man. Two teenagers were charged after the incident, which police said resulted from a verbal dispute. And in 2020 alone, there were five shootings at Lenox Square Mall in Atlanta, according to the Atlanta Journal-Constitution. Some stemmed from fights, others from robberies. Friends Grace Gordon and Haneef Muhammad recently moved to metro Atlanta. Gordon was in a common seating area in the mall Tuesday at the time of the shooting. She didn’t hear the shots but heard a bystander say there had been a shooting in the Buffalo Wild Wings.Gordon, an aspiring rapper and Muhammad, an aspiring chef, were outside the mall Wednesday. The pair have been doing job interviews with stores there, seeking work. Gordon thinks the shooting and similar incidents stem from what she calls “mall culture” in Atlanta. Mall culture, she said, involves arrogant, prideful people going to the mall to show off their money and be seen.“People have something to prove all day, every day, and I don’t understand it,” Gordon said. “People are crazy … It’s just the air of Atlanta. It’s the arrogance of the world.”Muhammad said people in Atlanta are quick to resort to violence when their egos are hurt and are proud of the notoriety crime gives them.“Everybody believes, if I have a weapon, I can use it,” he said, adding “you’re not getting any kudos for that. You shot a child.”Muhammad also suggested the pandemic has made people more on edge.More police aren’t the solution, Gordon said. She thinks people ought to arm themselves and be cautious of others.Business owner and midtown Atlanta resident Carrie Fowler said there was a time when she was at Lenox or Phipps mall every weekend. Now, she avoids malls because of the incidents that have happened. She was only at Cumberland Wednesday to visit the tire center at Costco.“They’re dangerous,” Fowler said. “Too many shootings, too many scary events, too many cars being broken into, too many mass shootings.”Fowler felt safer seeing a heavier than usual police presence at Cumberland but said it “feels like being in a third world country, when you’re not used to going places and seeing police officers with guns. Just cutting through here to get from Costco to here to eat lunch, I saw two police officers and some kind of police dog.”Fowler thinks Atlanta seems more violent these days. She’s not sure what the cause is but feels Atlanta Mayor Keisha Lance Bottoms hasn’t done enough to address crime.Fowler also mentioned the mass shooting at three metro Atlanta spas that killed eight people. The incidents brought the issue home for Fowler, who said she had never had a large shooting occur in her ZIP code.}. What is the turning point or peak of the story: In retaliation from Otf boona shooting glizzy gang members at the mall, glizzy gang decided to kill lotf durk by breaking into otf durks gated  mansion by sneaking in through a large wooded area in the back of the gated community. How does this event bring the conflicts and challenges to a head: This conflict is brought to a head when otf durks wife india hear glizzy gang trying to break in. India grabs a gun and starts shooting at them and they start shooting back, cause a gun battle at 5am in a gated community . How do the characters confront this situation, and what are the immediate consequences: Otf durk immediately puts a bounty on glizzy gang members for crossing the line of threatening the safety of his home where he lives with his wife India and children. Glizzy gang member were mostly hiding out and put up but a member named glizzy gang Mark caught caught out lacking and got killed on the westside of atlanta by an otf member whos name cant be disclosed. How do the characters deal with the aftermath of the climax: Since glizzy gang lost their member named mark, theyve been pretty quiet in the otf and 4pf beef. Otf durk further solidify otf as a gang thats not to be played with and lil baby and 4pf still have loose beef with glizzy gang. What actions do they take to resolve the remaining conflicts or tie up loose ends: Otf is currently up 1 body on glizzy gang and as theyre a group of young car thieves going against 2 of the richest rappers in atlanta in otf durk and lil baby, its safe to say theyre falling back from this beef if not totally put up . Are there any new challenges or twists that arise: this whole situation leave lil baby and otf durk locked in a relationship with each other that runs deeper than rap.. How does the story end: Kayla b never got the chain back but the story ends with otf durk continuing his rap career while keeping his street reputation in tact like a real leader and boss. Otf boona is serving an 8 year prison sentence.. What is the new normal life for the characters after the events of the story: Life is back to normal for all people involved except glizzy gang mark who got killed and otf boona who in prison because of the mall shootout.. What changes have the characters undergone: Otf durk and lil baby are tighter than ever and might be putting out another collaboration album.. Are there any lessons learned or insights gained: The lesson to be learned is to choose you battle wisely. glizzy gang couldve gave the chain back and possibly built a relationship with otf durk and kept a relationship with lil baby, instead hey ended up with 4 members shot and another member killed.. What is the main theme or message of the story: The main theme of this story is choose your battles wisely because rich bosses like otf durk are not anything to be played with. They have too much money, too many resources and too many loyal soldiers like otf boona with will shoot on sight, broad daylight and dont care about going to jail for it,. How does the narrative arc support this theme or message: a simple car break in that resulted in the theft of a chain caused glizzy gang members to get shot and killed. How should the audience feel after experiencing this story: after experiencing this story, the audience should feel spooky, and fearful because theirs always a backstory that involves street politics and beef because its always deeper than rap. The media only reported that otf durks home got broken into but there was much more behind the scenes to this story.'

narrative_arc_statement = "The following text is a narrative arc template. Use it as context to write "

pt_1_intro_request = f"{narrative_arc_statement} a 30 second story intro to this story, followed by a 1 minute segment on the normal days of the characters and the inciting incident...{narrative_arc_template}"

intro_response=""

#coccr = challenges obstacles character choices and reactions
pt_2_coccr = f"This is the current introduction to the story we are creating... {intro_response} based on this narrative arc context... {narrative_arc_template}. Use the current introduction and narrative arc context as the contect to write the next 'rising action' in our story. The next part should be 1 to 2 minutes about the challenges, conflicts, or obstacles that the characters face as a result of the inciting incident, how these challenges escalate over time, the choices the characters make to deal with these challenges and how the characters react to this these new developments."

coccr_response = ""

pt_3_climax_turning_point = f"The following text is a portion of a story we've wrote... {intro_response} {coccr_response} based on this narrative arc context... {narrative_arc_template}. Use what we've created so far to continue to write the next part of this story. The next part should be 1 to 2 minties of turning point or peak of the story, how this event bring the conflicts and challenges to a head, how the characters confront this situation and what are the immediate consequences"



def get_ai_response():
    # Create a list of messages. The first message is a system message that
    # instructs the behavior of the AI. The following messages alternate between
    # the user and the assistant.
    messages = [
        
        {"role": "system", "content": 'Your job is to be a story writer that writes compelling stories and captivate listeners and garner attention using an anecdotal narrative style, much like you would find in narrative journalism. These stores will be used as scripts for documentary style videos'},

        {"role": "user", "content": pt_1_intro_request}
    ]

    # Call the OpenAI API to get a chat response
    response = openai.ChatCompletion.create(
        model="gpt-3.5-turbo-16k",
        messages=messages
    )

    # Print the assistant's response
    print(response['choices'][0]['message']['content'])
    intro_response = response['choices'][0]['message']['content']

# Run the function
get_ai_response()

